syntax = "proto3";

package payment.square.v1;

message CreateSquarePaymentRequest {
  string nonce = 1;
  int64 amount = 2;      // smallest unit (e.g. cents)
  string currency = 3;   // ISO 4217, e.g. "USD"
  string note = 4;
  string verificationToken = 5;
  string bookingReference = 6;

}

message CreateSquarePaymentResponse {
  string payment_id = 1;
  string status = 2;
}

message MakePaymentLinkRequest {
  int64 amount = 1;
  string bookingReference = 2;
}

message MakePaymentLinkResponse {
  string url = 1;
}

message InitiateRefundRequest {
  string bookingReference = 1;
}

message InitiateRefundResponse {
  string refund_id = 1;
  string status = 2;
  string payment_id = 3;
}

service PaymentService {
  rpc CreatePayment(CreateSquarePaymentRequest) returns (CreateSquarePaymentResponse);
  rpc MakePaymentLink(MakePaymentLinkRequest) returns (MakePaymentLinkResponse);
  rpc InitiateRefund(InitiateRefundRequest) returns (InitiateRefundResponse);
}
